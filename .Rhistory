library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
result <- fromJSON(file = "leagure.json")
soccer_record <- read.csv(result[leagure])
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
View(predict)
predict("England_a","Man City","Tottenham")
predict("England_a","Man City","Tottenham")
predict("England_a","Man City","Tottenham")
result <- fromJSON(file = "leagure.json")
getcwd()
gettwd()
getwd()
dir()
}
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
soccer_record <- read.csv(result[leagure])
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
View(predict)
predict("England_a","Man City","Tottenham")
predict("England_a","Man City","Tottenham")
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
filename <- result[leagure]
soccer_record <- read.csv(filename)
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
predict("England_a","Man City","Tottenham")
predict("England_a","Man City","Tottenham")
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
filename <- result[leagure]
leagure <- "England_a"
filename <- result[leagure]
filename <- result[[leagure]]
read.csv(filename)
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
filename <- result[[leagure]]
soccer_record <- read.csv(filename)
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
filename <- result[[leagure]]
soccer_record <- read.csv(filename)
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
library(goalmodel)
library(dplyr) # Useful for data manipulation.
library("rjson")
# soccer_record <- read.csv('I1_2019_2020.csv')
# goals1 <- soccer_record$FTHG
# goals2 <- soccer_record$FTAG
# team1 <- soccer_record$HomeTeam
# team2 <- soccer_record$AwayTeam
# # Fit the default model, with the home team as team1.
# gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2=team2,
#                      dc=TRUE
#                      )
# # Show the estimated attack and defense ratings and more.
# summary(gm_res)
# to_predict1 <- c('Inter')
# to_predict2 <- c('Atalanta')
# predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print(predict_goals)
# print('----------------------------------')
# print(predict_result)
# # add weights
# my_weights <- weights_dc(soccer_record$Date, xi=0.0019)
# gm_res_w <- goalmodel(goals1 = goals1, goals2 = goals2,
#                      team1 = team1, team2 = team2,
#                      weights = my_weights)
# predict_goals2 <- predict_expg(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# predict_result2 <- predict_result(gm_res_w, team1=to_predict1, team2=to_predict2, return_df = TRUE)
# print("##############################")
# print(predict_goals2)
# print('----------------------------------')
# print(predict_result2)
#* Return the predict of two teams
#* @param team_h The home team
#* @param team_a The away team
#* @post /predict
predict <- function(leagure, team_h, team_a) {
setwd("E:\\code\\R\\soccer_predict_r")
result <- fromJSON(file = "leagure.json")
filename <- result[[leagure]]
soccer_record <- read.csv(filename)
# if(leagure == 'Italy_a'){
#     index <- 1
# }
# if(leagure == 'England_a'){
#     index <- 2
# }
# soccer_record <- switch(
#     index,
#     read.csv('I1_2019_2020.csv'),
#     read.csv('E0_2019_2020.csv')
# )
goals1 <- soccer_record$FTHG
goals2 <- soccer_record$FTAG
team1 <- soccer_record$HomeTeam
team2 <- soccer_record$AwayTeam
gm_res <- goalmodel(goals1 = goals1, goals2 = goals2,
team1 = team1, team2=team2,
dc=TRUE
)
to_predict1 <- c(team_h)
to_predict2 <- c(team_a)
predict_goals <- predict_expg(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
predict_result <- predict_result(gm_res, team1=to_predict1, team2=to_predict2, return_df = TRUE)
df2 = data.frame(
team_name = c(predict_goals$team1, "DRAW", predict_goals$team2),
exp_goals = c(predict_goals$expg1, "NA", predict_goals$expg2),
exp_result = c(predict_result$p1, predict_result$pd, predict_result$p2)
)
return(df2)
}
predict("England_a","Man City","Tottenham")
